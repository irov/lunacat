set_property(GLOBAL PROPERTY USE_FOLDERS ON)

MESSAGE("UNIX: ${UNIX}")
MESSAGE("ANDROID: ${ANDROID}")
MESSAGE("APPLE: ${APPLE}")
MESSAGE("MINGW: ${MINGW}")
MESSAGE("MSVC: ${MSVC}")

SET(LUNACAT_REPOSITORY ${CMAKE_CURRENT_SOURCE_DIR}/../..)
SET(LUNACAT_DEPENDENCIES_SOURCE_DIRECTORY ${LUNACAT_REPOSITORY}/dependencies)
SET(LUNACAT_SOURCE_DIRECTORY ${LUNACAT_REPOSITORY}/src)
SET(LUNACAT_DEPENDENCIES_TEMP_DIRECTORY ${CMAKE_BINARY_DIR}/solutions)

IF(NOT LUNACAT_INSTALL_PATH)
    SET(LUNACAT_INSTALL_PATH ${LUNACAT_REPOSITORY}/bin)
ENDIF()

MESSAGE("LUNACAT_REPOSITORY: ${LUNACAT_REPOSITORY}")
MESSAGE("LUNACAT_DEPENDENCIES_SOURCE_DIRECTORY: ${LUNACAT_DEPENDENCIES_SOURCE_DIRECTORY}")
MESSAGE("LUNACAT_SOURCE_DIRECTORY: ${LUNACAT_SOURCE_DIRECTORY}")
MESSAGE("LUNACAT_DEPENDENCIES_TEMP_DIRECTORY: ${LUNACAT_DEPENDENCIES_TEMP_DIRECTORY}")
MESSAGE("LUNACAT_INSTALL_PATH: ${LUNACAT_INSTALL_PATH}")

SET(LUNACAT_TARGET_UNIX OFF)
SET(LUNACAT_TARGET_ANDROID OFF)
SET(LUNACAT_TARGET_OSX OFF)
SET(LUNACAT_TARGET_MINGW OFF)
SET(LUNACAT_TARGET_WIN32 OFF)

if(UNIX AND NOT ANDROID AND NOT APPLE)
    SET(LUNACAT_TARGET_UNIX ON)
elseif(ANDROID)
    SET(LUNACAT_TARGET_ANDROID ON)
elseif(APPLE AND NOT IOS)
    SET(LUNACAT_TARGET_OSX ON)
elseif(MINGW)
    SET(LUNACAT_TARGET_MINGW ON)
elseif(WIN32)
    SET(LUNACAT_TARGET_WIN32 ON)
else()
    MESSAGE(FATAL_ERROR "unsuppot platform")
endif()

MESSAGE("LUNACAT_TARGET_UNIX: ${LUNACAT_TARGET_UNIX}")
MESSAGE("LUNACAT_TARGET_ANDROID: ${LUNACAT_TARGET_ANDROID}")
MESSAGE("LUNACAT_TARGET_OSX: ${LUNACAT_TARGET_OSX}")
MESSAGE("LUNACAT_TARGET_MINGW: ${LUNACAT_TARGET_MINGW}")
MESSAGE("LUNACAT_TARGET_WIN32: ${LUNACAT_TARGET_WIN32}")

SET(LUNACAT_DEPENDENCIES_CONFIG_OUTPUT_BASE ${LUNACAT_REPOSITORY}/outputs/depends/config/${CMAKE_GENERATOR})
SET(LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_BASE ${LUNACAT_REPOSITORY}/outputs/depends/archive/${CMAKE_GENERATOR})
SET(LUNACAT_DEPENDENCIES_LIBRARY_OUTPUT_BASE ${LUNACAT_REPOSITORY}/outputs/depends/library/${CMAKE_GENERATOR})
SET(LUNACAT_DEPENDENCIES_RUNTIME_OUTPUT_BASE ${LUNACAT_REPOSITORY}/outputs/depends/runtime/${CMAKE_GENERATOR})

# input and thirdparty paths
if(LUNACAT_TARGET_UNIX)
    SET(LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_BASE}/${CMAKE_BUILD_TYPE})
    SET(LUNACAT_DEPENDENCIES_LIBRARY_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_LIBRARY_OUTPUT_BASE}/${CMAKE_BUILD_TYPE})
    SET(LUNACAT_DEPENDENCIES_RUNTIME_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_RUNTIME_OUTPUT_BASE}/${CMAKE_BUILD_TYPE})
    SET(LUNACAT_DEPENDENCIES_CONFIG_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_CONFIG_OUTPUT_BASE}/${CMAKE_BUILD_TYPE})
    
    SET(LUNACAT_DEPENDENCIES_LIBRARY_DIRECTORY ${LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_DIRECTORY})
elseif(LUNACAT_TARGET_ANDROID)
    SET(LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_BASE}/${CMAKE_BUILD_TYPE}/${ANDROID_ABI})
    SET(LUNACAT_DEPENDENCIES_LIBRARY_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_LIBRARY_OUTPUT_BASE}/${CMAKE_BUILD_TYPE}/${ANDROID_ABI})
    SET(LUNACAT_DEPENDENCIES_RUNTIME_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_RUNTIME_OUTPUT_BASE}/${CMAKE_BUILD_TYPE}/${ANDROID_ABI})
    SET(LUNACAT_DEPENDENCIES_CONFIG_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_CONFIG_OUTPUT_BASE}/${CMAKE_BUILD_TYPE}/${ANDROID_ABI})
    
    SET(LUNACAT_DEPENDENCIES_LIBRARY_DIRECTORY ${LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_DIRECTORY})
elseif(LUNACAT_TARGET_OSX)
    SET(LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_BASE})
    SET(LUNACAT_DEPENDENCIES_LIBRARY_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_LIBRARY_OUTPUT_BASE})
    SET(LUNACAT_DEPENDENCIES_RUNTIME_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_RUNTIME_OUTPUT_BASE})
    SET(LUNACAT_DEPENDENCIES_CONFIG_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_CONFIG_OUTPUT_BASE}/${CMAKE_BUILD_TYPE})
    
    SET(LUNACAT_DEPENDENCIES_LIBRARY_DIRECTORY ${LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_DIRECTORY}/${CMAKE_BUILD_TYPE})
elseif(LUNACAT_TARGET_MINGW)
    SET(LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_BASE}/${CMAKE_BUILD_TYPE})
    SET(LUNACAT_DEPENDENCIES_LIBRARY_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_LIBRARY_OUTPUT_BASE}/${CMAKE_BUILD_TYPE})
    SET(LUNACAT_DEPENDENCIES_RUNTIME_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_RUNTIME_OUTPUT_BASE}/${CMAKE_BUILD_TYPE})
    SET(LUNACAT_DEPENDENCIES_CONFIG_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_CONFIG_OUTPUT_BASE}/${CMAKE_BUILD_TYPE})
    
    SET(LUNACAT_DEPENDENCIES_LIBRARY_DIRECTORY ${LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_DIRECTORY})
elseif(LUNACAT_TARGET_WIN32)
    SET(LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_BASE})
    SET(LUNACAT_DEPENDENCIES_LIBRARY_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_LIBRARY_OUTPUT_BASE})
    SET(LUNACAT_DEPENDENCIES_RUNTIME_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_RUNTIME_OUTPUT_BASE})
    SET(LUNACAT_DEPENDENCIES_CONFIG_OUTPUT_DIRECTORY ${LUNACAT_DEPENDENCIES_CONFIG_OUTPUT_BASE}/${CMAKE_BUILD_TYPE})
    
    SET(LUNACAT_DEPENDENCIES_LIBRARY_DIRECTORY ${LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_DIRECTORY}/${CMAKE_BUILD_TYPE})
endif()

MESSAGE("LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_DIRECTORY: ${LUNACAT_DEPENDENCIES_ARCHIVE_OUTPUT_DIRECTORY}")
MESSAGE("LUNACAT_DEPENDENCIES_LIBRARY_OUTPUT_DIRECTORY: ${LUNACAT_DEPENDENCIES_LIBRARY_OUTPUT_DIRECTORY}")
MESSAGE("LUNACAT_DEPENDENCIES_RUNTIME_OUTPUT_DIRECTORY: ${LUNACAT_DEPENDENCIES_RUNTIME_OUTPUT_DIRECTORY}")
MESSAGE("LUNACAT_DEPENDENCIES_CONFIG_OUTPUT_DIRECTORY: ${LUNACAT_DEPENDENCIES_CONFIG_OUTPUT_DIRECTORY}")